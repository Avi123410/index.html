<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SSPL DRDO - CARS Portal</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary-color: #264f7a;
      --secondary-color: #1976d2;
      --dark-color: #333;
      --light-color: #f9f9f9;
      --danger-color: #dc3545;
      --success-color: #28a745;
      --warning-color: #ffc107;
      --info-color: #17a2b8;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      color: #333;
      background-color: #f5f5f5;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    .header {
      background-color: var(--primary-color);
      color: white;
      padding: 15px 0;
      text-align: center;
      margin-bottom: 30px;
      border-radius: 5px;
    }

    .header h1 {
      font-size: 1.8rem;
    }

    .header p {
      opacity: 0.9;
      font-size: 0.95rem;
    }

    .form-container {
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
      padding: 30px;
      margin-bottom: 30px;
    }

    .form-section {
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 1px solid #eee;
    }

    .form-section:last-child {
      border-bottom: none;
    }

    .section-title {
      color: var(--primary-color);
      margin-bottom: 20px;
      font-size: 1.3rem;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .section-title i {
      font-size: 1.1rem;
    }

    .form-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }

    .form-group {
      margin-bottom: 15px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: #555;
    }

    .form-group label.required::after {
      content: ' *';
      color: var(--danger-color);
    }

    .form-control {
      width: 100%;
      padding: 12px 15px;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 1rem;
      transition: all 0.3s;
    }

    .form-control:focus {
      border-color: var(--secondary-color);
      outline: none;
      box-shadow: 0 0 0 3px rgba(25, 118, 210, 0.2);
    }

    textarea.form-control {
      min-height: 120px;
      resize: vertical;
    }

    .form-actions {
      display: flex;
      justify-content: flex-end;
      gap: 15px;
      margin-top: 30px;
    }

    .btn {
      padding: 12px 24px;
      border-radius: 5px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s;
      border: none;
    }

    .btn-primary {
      background-color: var(--secondary-color);
      color: white;
    }

    .btn-primary:hover {
      background-color: #145ca1;
    }

    .btn-secondary {
      background-color: #6c757d;
      color: white;
    }

    .btn-secondary:hover {
      background-color: #5a6268;
    }

    .approval-flow {
      background-color: #f8f9fa;
      border-radius: 8px;
      padding: 20px;
      margin-top: 30px;
      border-left: 4px solid var(--secondary-color);
    }

    .approval-flow h3 {
      margin-bottom: 15px;
      color: var(--primary-color);
    }

    .flow-steps {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
    }

    .flow-step {
      flex: 1;
      min-width: 200px;
      background-color: white;
      border-radius: 5px;
      padding: 15px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      position: relative;
    }

    .flow-step.active {
      border-left: 4px solid var(--success-color);
    }

    .flow-step.pending {
      border-left: 4px solid var(--warning-color);
    }

    .flow-step.future {
      opacity: 0.7;
    }

    .flow-step h4 {
      margin-bottom: 10px;
      color: var(--dark-color);
    }

    .flow-step p {
      font-size: 0.9rem;
      color: #666;
    }

    .file-upload {
      border: 2px dashed #ddd;
      border-radius: 5px;
      padding: 30px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s;
    }

    .file-upload:hover {
      border-color: var(--secondary-color);
      background-color: rgba(25, 118, 210, 0.05);
    }

    .file-upload i {
      font-size: 2rem;
      color: var(--secondary-color);
      margin-bottom: 10px;
    }

    .file-upload input {
      display: none;
    }

    .uploaded-files {
      margin-top: 15px;
    }

    .uploaded-file {
      display: flex;
      align-items: center;
      background-color: #f8f9fa;
      padding: 10px;
      border-radius: 5px;
      margin-bottom: 8px;
    }

    .uploaded-file i {
      margin-right: 10px;
      color: #666;
    }

    .uploaded-file .file-name {
      flex: 1;
    }

    .uploaded-file .file-remove {
      color: var(--danger-color);
      cursor: pointer;
    }

    .budget-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
    }

    .budget-table th, .budget-table td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #ddd;
    }

    .budget-table th {
      background-color: #f8f9fa;
      font-weight: 500;
      color: var(--primary-color);
    }

    .budget-table tr:last-child td {
      border-bottom: none;
    }

    .budget-table .total-row {
      font-weight: 500;
      background-color: #f8f9fa;
    }

    .add-item-btn {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      margin-top: 10px;
      color: var(--secondary-color);
      cursor: pointer;
    }

    /* Responsive styles */
    @media (max-width: 768px) {
      .form-row {
        grid-template-columns: 1fr;
      }
      
      .flow-steps {
        flex-direction: column;
      }
      
      .form-actions {
        flex-direction: column;
      }
      
      .btn {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Collaborative Agreement Request System (CARS)</h1>
      <p>Submit project proposals for university collaboration</p>
    </div>

    <div class="form-container">
      <form id="carsForm">
        <!-- Basic Information Section -->
        <div class="form-section">
          <h2 class="section-title"><i class="fas fa-info-circle"></i> Project Information</h2>
          
          <div class="form-row">
            <div class="form-group">
              <label for="projectTitle" class="required">Project Title</label>
              <input type="text" id="projectTitle" class="form-control" required>
            </div>
            
            <div class="form-group">
              <label for="projectCode" class="required">Project Code</label>
              <input type="text" id="projectCode" class="form-control" required>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="university" class="required">University/Institution</label>
              <select id="university" class="form-control" required>
                <option value="">Select University</option>
                <option value="IIT Delhi">IIT Delhi</option>
                <option value="IIT Bombay">IIT Bombay</option>
                <option value="IIT Madras">IIT Madras</option>
                <option value="IISc Bangalore">IISc Bangalore</option>
                <option value="Other">Other (Specify)</option>
              </select>
            </div>
            
            <div class="form-group" id="otherUniversityGroup" style="display: none;">
              <label for="otherUniversity" class="required">Specify University</label>
              <input type="text" id="otherUniversity" class="form-control">
            </div>
          </div>
          
          <div class="form-group">
            <label for="projectDescription" class="required">Project Description</label>
            <textarea id="projectDescription" class="form-control" required></textarea>
          </div>
        </div>
        
        <!-- Budget Information Section -->
        <div class="form-section">
          <h2 class="section-title"><i class="fas fa-rupee-sign"></i> Budget Information</h2>
          
          <div class="form-row">
            <div class="form-group">
              <label for="totalBudget" class="required">Total Project Budget (₹)</label>
              <input type="number" id="totalBudget" class="form-control" min="0" step="1000" required>
            </div>
            
            <div class="form-group">
              <label for="duration" class="required">Project Duration (Months)</label>
              <input type="number" id="duration" class="form-control" min="1" max="36" required>
            </div>
          </div>
          
          <div class="form-group">
            <label>Budget Breakdown</label>
            <table class="budget-table">
              <thead>
                <tr>
                  <th>Item</th>
                  <th>Description</th>
                  <th>Amount (₹)</th>
                  <th></th>
                </tr>
              </thead>
              <tbody id="budgetItems">
                <tr>
                  <td><input type="text" class="form-control" placeholder="Equipment"></td>
                  <td><input type="text" class="form-control" placeholder="Description"></td>
                  <td><input type="number" class="form-control" placeholder="Amount" min="0"></td>
                  <td><i class="fas fa-times" style="color: var(--danger-color); cursor: pointer;"></i></td>
                </tr>
              </tbody>
              <tfoot>
                <tr class="total-row">
                  <td colspan="2">Total Budget</td>
                  <td id="budgetTotal">₹0</td>
                  <td></td>
                </tr>
              </tfoot>
            </table>
            <div class="add-item-btn" id="addBudgetItem">
              <i class="fas fa-plus"></i> Add Budget Item
            </div>
          </div>
          
          <!-- Dynamic Approval Flow -->
          <div class="approval-flow" id="approvalFlow">
            <h3>Approval Process</h3>
            <div class="flow-steps">
              <div class="flow-step active">
                <h4>Research Center Head</h4>
                <p>Initial review and recommendation</p>
              </div>
              <div class="flow-step pending" id="directorStep">
                <h4>Director Approval</h4>
                <p>Required for all projects</p>
              </div>
              <div class="flow-step future" id="secretaryStep" style="display: none;">
                <h4>Secretary Approval</h4>
                <p>Required for projects > ₹3 lakhs</p>
              </div>
              <div class="flow-step future" id="oicStep" style="display: none;">
                <h4>Officer In-Charge</h4>
                <p>Final approval for projects > ₹3 lakhs</p>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Documentation Section -->
        <div class="form-section">
          <h2 class="section-title"><i class="fas fa-file-alt"></i> Documentation</h2>
          
          <div class="form-group">
            <label>Project Proposal Document</label>
            <div class="file-upload" id="proposalUpload">
              <i class="fas fa-file-pdf"></i>
              <p>Click to upload project proposal (PDF format)</p>
              <input type="file" id="proposalFile" accept=".pdf">
            </div>
            <div class="uploaded-files" id="proposalFiles"></div>
          </div>
          
          <div class="form-group">
            <label>MOM (Minutes of Meeting)</label>
            <div class="file-upload" id="momUpload">
              <i class="fas fa-file-word"></i>
              <p>Click to upload MOM document (Word/PDF)</p>
              <input type="file" id="momFile" accept=".pdf,.doc,.docx">
            </div>
            <div class="uploaded-files" id="momFiles"></div>
          </div>
          
          <div class="form-group">
            <label>Presentation (PPT)</label>
            <div class="file-upload" id="pptUpload">
              <i class="fas fa-file-powerpoint"></i>
              <p>Click to upload presentation (PPT format)</p>
              <input type="file" id="pptFile" accept=".ppt,.pptx">
            </div>
            <div class="uploaded-files" id="pptFiles"></div>
          </div>
        </div>
        
        <!-- Submission Section -->
        <div class="form-section">
          <h2 class="section-title"><i class="fas fa-paper-plane"></i> Submission</h2>
          
          <div class="form-group">
            <label for="comments">Additional Comments</label>
            <textarea id="comments" class="form-control"></textarea>
          </div>
          
          <div class="form-actions">
            <button type="button" class="btn btn-secondary">Save Draft</button>
            <button type="submit" class="btn btn-primary">Submit Proposal</button>
          </div>
        </div>
      </form>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // University selection
      const universitySelect = document.getElementById('university');
      const otherUniversityGroup = document.getElementById('otherUniversityGroup');
      
      universitySelect.addEventListener('change', function() {
        if (this.value === 'Other') {
          otherUniversityGroup.style.display = 'block';
          document.getElementById('otherUniversity').setAttribute('required', 'true');
        } else {
          otherUniversityGroup.style.display = 'none';
          document.getElementById('otherUniversity').removeAttribute('required');
        }
      });
      
      // Budget items management
      const budgetItems = document.getElementById('budgetItems');
      const addBudgetItem = document.getElementById('addBudgetItem');
      const totalBudgetInput = document.getElementById('totalBudget');
      const budgetTotal = document.getElementById('budgetTotal');
      
      // Add budget item
      addBudgetItem.addEventListener('click', function() {
        const newRow = document.createElement('tr');
        newRow.innerHTML = `
          <td><input type="text" class="form-control" placeholder="Item name"></td>
          <td><input type="text" class="form-control" placeholder="Description"></td>
          <td><input type="number" class="form-control budget-amount" placeholder="Amount" min="0"></td>
          <td><i class="fas fa-times remove-item" style="color: var(--danger-color); cursor: pointer;"></i></td>
        `;
        budgetItems.appendChild(newRow);
        
        // Add event for remove button
        newRow.querySelector('.remove-item').addEventListener('click', function() {
          budgetItems.removeChild(newRow);
          calculateBudgetTotal();
        });
        
        // Add event for amount change
        newRow.querySelector('.budget-amount').addEventListener('change', calculateBudgetTotal);
      });
      
      // Calculate budget total
      function calculateBudgetTotal() {
        let total = 0;
        document.querySelectorAll('.budget-amount').forEach(input => {
          total += parseFloat(input.value) || 0;
        });
        budgetTotal.textContent = `₹${total.toLocaleString('en-IN')}`;
        totalBudgetInput.value = total;
        
        // Update approval flow based on budget
        updateApprovalFlow(total);
      }
      
      // Update approval flow based on budget amount
      function updateApprovalFlow(total) {
        const directorStep = document.getElementById('directorStep');
        const secretaryStep = document.getElementById('secretaryStep');
        const oicStep = document.getElementById('oicStep');
        
        if (total > 300000) {
          directorStep.classList.remove('pending');
          directorStep.classList.add('active');
          secretaryStep.style.display = 'block';
          oicStep.style.display = 'block';
        } else {
          directorStep.classList.remove('active');
          directorStep.classList.add('pending');
          secretaryStep.style.display = 'none';
          oicStep.style.display = 'none';
        }
      }
      
      // File upload functionality
      function setupFileUpload(uploadElement, fileInput, filesContainer) {
        uploadElement.addEventListener('click', function() {
          fileInput.click();
        });
        
        fileInput.addEventListener('change', function() {
          if (this.files.length > 0) {
            filesContainer.innerHTML = '';
            
            Array.from(this.files).forEach(file => {
              const fileElement = document.createElement('div');
              fileElement.className = 'uploaded-file';
              fileElement.innerHTML = `
                <i class="fas fa-file"></i>
                <span class="file-name">${file.name}</span>
                <span class="file-remove"><i class="fas fa-times"></i></span>
              `;
              
              fileElement.querySelector('.file-remove').addEventListener('click', function() {
                filesContainer.removeChild(fileElement);
                fileInput.value = '';
              });
              
              filesContainer.appendChild(fileElement);
            });
          }
        });
      }
      
      // Setup file uploads
      setupFileUpload(
        document.getElementById('proposalUpload'),
        document.getElementById('proposalFile'),
        document.getElementById('proposalFiles')
      );
      
      setupFileUpload(
        document.getElementById('momUpload'),
        document.getElementById('momFile'),
        document.getElementById('momFiles')
      );
      
      setupFileUpload(
        document.getElementById('pptUpload'),
        document.getElementById('pptFile'),
        document.getElementById('pptFiles')
      );
      
      // Form submission
      document.getElementById('carsForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Validate form
        const totalBudget = parseFloat(totalBudgetInput.value) || 0;
        const requiredApprovals = totalBudget > 300000 ? 
          'Director → Secretary → Officer In-Charge' : 'Director Only';
        
        // Show submission confirmation (in real app, this would be an API call)
        alert(`Project proposal submitted successfully!\n\nApproval Path: ${requiredApprovals}`);
        
        // Reset form (in real app, would redirect to dashboard)
        // this.reset();
      });
      
      // Initialize budget calculation
      document.querySelectorAll('.budget-amount').forEach(input => {
        input.addEventListener('change', calculateBudgetTotal);
      });
      
      document.querySelectorAll('.remove-item').forEach(btn => {
        btn.addEventListener('click', function() {
          budgetItems.removeChild(this.closest('tr'));
          calculateBudgetTotal();
        });
      });
    });
  </script>
</body>
</html>
